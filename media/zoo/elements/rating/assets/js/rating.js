/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

!function(a){function o(){}a.extend(o.prototype,{name:"ElementRating",options:{url:null},initialize:function(n,t){this.options=a.extend({},this.options,t);var i=this,o=n.find("div.stars");o.each(function(e){a(this).bind("click",function(){var t=o.length-e;a.ajax({url:i.options.url,data:{method:"vote","args[0]":t},type:"post",datatype:"json",success:function(t){var e=a.parseJSON(t),i=e.value;0<i&&n.find("div.previous-rating").css("width",i+"%"),n.find("div.vote-message").text(e.message)}})}).bind("mouseenter",function(){a(this).addClass("hover")}).bind("mouseleave",function(){a(this).removeClass("hover")})})}}),a.fn[o.prototype.name]=function(){var i=arguments,n=i[0]?i[0]:null;return this.each(function(){var t=a(this);if(o.prototype[n]&&t.data(o.prototype.name)&&"initialize"!=n)t.data(o.prototype.name)[n].apply(t.data(o.prototype.name),Array.prototype.slice.call(i,1));else if(!n||a.isPlainObject(n)){var e=new o;o.prototype.initialize&&e.initialize.apply(e,a.merge([t],i)),t.data(o.prototype.name,e)}else a.error("Method "+n+" does not exist on jQuery."+o.name)})}}(jQuery),function(o){function a(){}o.extend(a.prototype,{name:"EditElementRating",options:{url:null},initialize:function(e,t){this.options=o.extend({},this.options,t);var i=this;e.find('input[name="reset-rating"]').bind("click",function(){o.ajax({url:i.options.url+"&task=callelement&method=reset",success:function(t){e.replaceWith(t)}})})}}),o.fn[a.prototype.name]=function(){var i=arguments,n=i[0]?i[0]:null;return this.each(function(){var t=o(this);if(a.prototype[n]&&t.data(a.prototype.name)&&"initialize"!=n)t.data(a.prototype.name)[n].apply(t.data(a.prototype.name),Array.prototype.slice.call(i,1));else if(!n||o.isPlainObject(n)){var e=new a;a.prototype.initialize&&e.initialize.apply(e,o.merge([t],i)),t.data(a.prototype.name,e)}else o.error("Method "+n+" does not exist on jQuery."+a.name)})}}(jQuery);