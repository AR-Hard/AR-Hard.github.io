/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

!function(a){function o(){}o.prototype=a.extend(o.prototype,{name:"ElementDownload",options:{url:""},initialize:function(t,e){this.options=a.extend({},this.options,e);var n=this;t.find('input[name="reset-hits"]').bind("click",function(){a.ajax({url:n.options.url+"&task=callelement&method=reset",success:function(e){t.replaceWith(e)}})})}}),a.fn[o.prototype.name]=function(){var n=arguments,i=n[0]?n[0]:null;return this.each(function(){var e=a(this);if(o.prototype[i]&&e.data(o.prototype.name)&&"initialize"!=i)e.data(o.prototype.name)[i].apply(e.data(o.prototype.name),Array.prototype.slice.call(n,1));else if(!i||a.isPlainObject(i)){var t=new o;o.prototype.initialize&&t.initialize.apply(t,a.merge([e],n)),e.data(o.prototype.name,t)}else a.error("Method "+i+" does not exist on jQuery."+o.name)})}}(jQuery),function(a){function o(){}o.prototype=a.extend(o.prototype,{name:"DownloadSubmission",initialize:function(e){var t=this;this.element=e,this.advanced=e.find("select.upload"),this.select_upload=this.advanced.length?this.advanced:e.find("input.upload"),e.find("span.download-cancel").bind("click",function(){t.select_upload.val(""),e.find("div.download-limit input").val(""),t.sanatize()}),this.advanced.length&&this.select_upload.bind("change",function(){e.find("span.preview").text(t.select_upload.val().replace(/^.*[\/\\]/g,"")),t.sanatize()}),t.sanatize()},sanatize:function(){this.select_upload.val()?(this.element.find("div.download-select").addClass("hidden"),this.element.find("div.download-preview").removeClass("hidden")):(this.element.find("div.download-select").removeClass("hidden"),this.element.find("div.download-preview").addClass("hidden"))}}),a.fn[o.prototype.name]=function(){var n=arguments,i=n[0]?n[0]:null;return this.each(function(){var e=a(this);if(o.prototype[i]&&e.data(o.prototype.name)&&"initialize"!=i)e.data(o.prototype.name)[i].apply(e.data(o.prototype.name),Array.prototype.slice.call(n,1));else if(!i||a.isPlainObject(i)){var t=new o;o.prototype.initialize&&t.initialize.apply(t,a.merge([e],n)),e.data(o.prototype.name,t)}else a.error("Method "+i+" does not exist on jQuery."+o.name)})}}(jQuery);