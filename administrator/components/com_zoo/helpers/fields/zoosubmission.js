/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

!function(i){function s(){}i.extend(s.prototype,{name:"ZooSubmission",initialize:function(t){var e=this;this.input=t,this.app=t.find('[data-type="application"]'),this.submissions=t.find('[data-type="submission"]'),this.types=t.find('[data-type="type"]'),this.setValues(),this.app.bind("change",function(){e.setValues()}),this.submissions.bind("change",function(){e.setValues()}),t.delegate("select","change",function(){i(this).closest("div.content").css("height","")}),i(t.closest("form")).find("input[id$=params_type]:hidden, input[id$=params_submission]:hidden").each(function(){i(this).closest(".control-group").remove().end().remove()})},setValues:function(){var e=this.app.val();if(e){var n=null;this.submissions.each(function(){var t=i(this);t.data("app")==e?(t.removeClass("hidden").attr("name",t.data("control")).next(".chzn-container").removeClass("hidden"),n=t.val()):t.addClass("hidden").attr("name","").next(".chzn-container").addClass("hidden")}),this.types.each(function(){var t=i(this);t.data("app")==e&&t.data("submission")==n?t.removeClass("hidden").attr("name",t.data("control")).next(".chzn-container").removeClass("hidden"):t.addClass("hidden").attr("name","").next(".chzn-container").addClass("hidden")})}else this.input.find('[data-type="submission"], [data-type="type"]').each(function(){i(this).addClass("hidden").attr("name","").next(".chzn-container").addClass("hidden")})}}),i.fn[s.prototype.name]=function(){var n=arguments,a=n[0]?n[0]:null;return this.each(function(){var t=i(this);if(s.prototype[a]&&t.data(s.prototype.name)&&"initialize"!=a)t.data(s.prototype.name)[a].apply(t.data(s.prototype.name),Array.prototype.slice.call(n,1));else if(!a||i.isPlainObject(a)){var e=new s;s.prototype.initialize&&e.initialize.apply(e,i.merge([t],n)),t.data(s.prototype.name,e)}else i.error("Method "+a+" does not exist on jQuery."+s.name)})}}(jQuery);