/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

!function(l){function o(){}l.extend(o.prototype,{name:"SortCategories",initialize:function(i){var o=l("#categories");o&&o.nestedSortable({forcePlaceholderSize:!0,handle:"td.handle",items:"li",placeholder:"placeholder",tabSize:25,tolerance:"pointer",toleranceElement:"> div",listType:"ul",start:function(e,a){a.placeholder.height(a.helper.height()-2),a.helper.addClass("drag")},stop:function(e,a){var t={};l.each(i.serializeArray(),function(e,a){t[a.name]=a.value}),a.item.addClass("loader").find("li").addClass("loader"),l.post(i.attr("action"),l.param(l.extend(t,{task:"saveorder",format:"raw"}))+"&"+o.nestedSortable("serialize"),function(e){o.find("li").removeClass("loader"),l.Message(e,!0),i.BrowseCategories("markCollapsibles")}),a.item.removeClass("drag")}})}}),l.fn[o.prototype.name]=function(){var t=arguments,i=t[0]?t[0]:null;return this.each(function(){var e=l(this);if(o.prototype[i]&&e.data(o.prototype.name)&&"initialize"!=i)e.data(o.prototype.name)[i].apply(e.data(o.prototype.name),Array.prototype.slice.call(t,1));else if(!i||l.isPlainObject(i)){var a=new o;o.prototype.initialize&&a.initialize.apply(a,l.merge([e],t)),e.data(o.prototype.name,a)}else l.error("Method "+i+" does not exist on jQuery."+o.name)})}}(jQuery),function(o){function l(){}o.extend(l.prototype,{name:"BrowseCategories",initialize:function(e){o("#categories").delegate("li.collapsible > div td.icon","click",function(){var e=o(this).closest("li");e.is(".collapsed")?e.removeClass("collapsed").children("ul").show():e.addClass("collapsed").children("ul").hide()}),o("#categories-list .collapse-all").bind("click",function(){o("#categories li.collapsible").each(function(){o(this).addClass("collapsed").children("ul").hide()})}),o("#categories-list .expand-all").bind("click",function(){o("#categories li.collapsible").each(function(){o(this).removeClass("collapsed").children("ul").show()})}),this.markCollapsibles()},markCollapsibles:function(){o("#categories").find("li").each(function(){o(this).removeClass("collapsible"),o(this).has("ul").length&&o(this).addClass("collapsible")})}}),o.fn[l.prototype.name]=function(){var t=arguments,i=t[0]?t[0]:null;return this.each(function(){var e=o(this);if(l.prototype[i]&&e.data(l.prototype.name)&&"initialize"!=i)e.data(l.prototype.name)[i].apply(e.data(l.prototype.name),Array.prototype.slice.call(t,1));else if(!i||o.isPlainObject(i)){var a=new l;l.prototype.initialize&&a.initialize.apply(a,o.merge([e],t)),e.data(l.prototype.name,a)}else o.error("Method "+i+" does not exist on jQuery."+l.name)})}}(jQuery),function(o){function l(){}o.extend(l.prototype,{name:"EditCategory",initialize:function(t){o.each(["apply","save","save-new"],function(e,a){o("#toolbar-"+a+" a, #toolbar-"+a+" button").bind("validate.adminForm",function(e){""==t.find('input[name="name"]').val()&&(t.find("span.message-name").css("display","block"),e.preventDefault())})})}}),o.fn[l.prototype.name]=function(){var t=arguments,i=t[0]?t[0]:null;return this.each(function(){var e=o(this);if(l.prototype[i]&&e.data(l.prototype.name)&&"initialize"!=i)e.data(l.prototype.name)[i].apply(e.data(l.prototype.name),Array.prototype.slice.call(t,1));else if(!i||o.isPlainObject(i)){var a=new l;l.prototype.initialize&&a.initialize.apply(a,o.merge([e],t)),e.data(l.prototype.name,a)}else o.error("Method "+i+" does not exist on jQuery."+l.name)})}}(jQuery);